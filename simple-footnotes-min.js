(function($){$.simpleFootnotes=function(options){var opts=$.extend({},$.simpleFootnotes.defaults,options),src=$(opts.source),dest=$(opts.destination).eq(0);src.each(function(i,elem){var num=i+1,srcHtml=$.simpleFootnotes.formatSrcHtml(opts,num,elem),destHtml=$.simpleFootnotes.formatDestHtml(opts,num,elem);$(dest).append(destHtml);$(elem).replaceWith(srcHtml)})};$.simpleFootnotes.defaults={destination:"body",destinationIdPrefix:"footnote-",source:"span.footnote",sourceIdPrefix:"footnote-inline-",trimLeft:"(",trimRight:")"};$.simpleFootnotes.cleanHtml=function(options,elem){var html=$(elem).html();html=$.trim(html);html=html.replace(/"/g,"&quot;");if(html.length>0&&html[0]===options.trimLeft){html=html.slice(1)}if(html.length>0&&html[html.length-1]===options.trimRight){html=html.slice(0,html.length-1)}html=$.trim(html);return html};$.simpleFootnotes.cleanText=function(options,elem){var text=$(elem).text();text=$.trim(text);text=text.replace(/"/g,"&quot;");if(text.length>0&&text[0]===options.trimLeft){text=text.slice(1)}if(text.length>0&&text[text.length-1]===options.trimRight){text=text.slice(0,text.length-1)}text=$.trim(text);return text};$.simpleFootnotes.formatDestHtml=function(options,num,elem){var id='id="'+$.simpleFootnotes.getDestId(options,num)+'"',href='href="#'+$.simpleFootnotes.getSrcId(options,num)+'"',html="<p "+id+">";html+="<a "+href+">";html+="["+num+"]";html+="</a> ";html+=$.simpleFootnotes.cleanHtml(options,elem);html+="</p>";return html};$.simpleFootnotes.formatSrcHtml=function(options,num,elem){var id='id="'+$.simpleFootnotes.getSrcId(options,num)+'"',href='href="#'+$.simpleFootnotes.getDestId(options,num)+'"',title='title="'+$.simpleFootnotes.cleanText(options,elem)+'"',html="<sup>";html+="<a "+id+" "+href+" "+title+">";html+="["+num+"]";html+="</a>";html+="</sup>";return html};$.simpleFootnotes.getDestId=function(options,num){return options.destinationIdPrefix+num};$.simpleFootnotes.getSrcId=function(options,num){return options.sourceIdPrefix+num}}(jQuery));
